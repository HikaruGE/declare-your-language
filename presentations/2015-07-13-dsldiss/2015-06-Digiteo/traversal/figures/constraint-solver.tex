\begin{figure*}[t]
  \begin{boxedminipage}{\linewidth}
  \begin{align*}
    (\CResolve{\r{x}}{\delta} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ [\delta \mapsto \d{x}](C, \G, \leqa, \psi) & \alabl{S-Resolve} \\
                   &\ \where \d{x} \in \ResG{\G}{\r{x}} \textit{ without exception} \\
    (\CAssoc{\d{x}}{\varsigma} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ [\varsigma \mapsto S](C, \G, \leqa, \psi) & \alabl{S-Assoc} \\
                   &\ \where \defscope(\d{x}) = S\\
    (\CEqtype{T_1}{T_2} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ \sigma (C, \G, \leqa, \psi) & \alabl{S-Equal} \\
                   &\ \where \unify{T_1}{T_2} \longrightarrow \sigma \\
    (\CLub{T}{t_1}{t_2} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ (\CEqtype{T}{t} \wedge C, \G, \leqa, \psi) & \alabl{S-Lub} \\
                   &\ \where \leqa\textit{ is ground and }  \lub{t_1}{t_2} \lubred{\leqa} t\\
%                   \mPN{maybe $\leqa$ does not need to be ground but the argument is tedious}
    (\CSubtype{t_1}{t_2} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ (C, \G, \leqa, \psi) & \alabl{S-Subtype} \\
                   &\ \where t_1 \leq_{\overline{\leqa}} t_2 \\
    (\CType{\d{x}}{T} \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ \left\{
      \begin{array}{ll}
        (C, \G, \leqa, \{\d{x} \mapsto T \} \cup \psi)  &\ \text{\it if } \d{x} \not\in \text{dom}(\psi) \\
        (\CAnd{\CTeq{\psi(\d{x})}{T}}{C}, \G, \leqa, \psi) & \ \text{\it else}
      \end{array}\right.
                   & \alabl{S-TypeOf} \\
    (\CTrue \wedge C, \G, \leqa, \psi)
    \longrightarrow&\ (C, \G, \leqa, \psi) & \alabl{S-True} 
  \end{align*}    
  \end{boxedminipage}
  \caption{Constraint solving algorithm}
\figurelabel{constraint-solver}
\end{figure*}
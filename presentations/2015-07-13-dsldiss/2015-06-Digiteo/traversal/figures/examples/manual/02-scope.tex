\twoboxes{0.545\hsize}{0.445\hsize}{%
\small
Scope graph

\begin{center}
\includegraphics[scale=.5]{figures/examples/manual/02-scope}
\end{center}

\begin{mconstraints}{Declarations}
\EqCType{\dic{n}{1}}{\tau_{1}} &
\EqCType{\dic{n}{3}}{\intty{}} \\
\EqCTypeL{\dic{fac}{2}}{\arrty{\intty{}}{\intty{}}}
\end{mconstraints}
%
\begin{mconstraints}{Reference constraints}%
\EqCResolve{\ric{n}{4}}{\delta_{1}} &
\EqCType{\delta_{1}}{\intty{}}\\
\EqCResolve{\ric{n}{5}}{\delta_{2}} &
\EqCType{\delta_{2}}{\intty{}}\\
\EqCResolve{\ric{fac}{6}}{\delta_{3}} &
\EqCType{\delta_{3}}{\arrty{\tau_{6}}{\intty{}}}\\
\EqCResolve{\ric{n}{7}}{\delta_{4}} &
\EqCType{\delta_{4}}{\intty{}}\\
\EqCResolve{\ric{fac}{8}}{\delta_{5}} &
\EqCType{\delta_{5}}{\arrty{\tau_{8}}{\tau_{1}}}
\end{mconstraints}% 
}{%
\small
\begin{mconstraints}{Type constraints}
\EqCSubtype{\tau_{2}}{\arrty{\intty{}}{\intty{}}}\\
\EqCTeq{\tau_{2}}{\arrty{\intty{}}{\tau_{3}}}\\
\EqCTeq{\tau_{4}}{\intty{}}\\
\EqCTeq{\tau_{5}}{\intty{}}\\
\EqCTeq{\tau_{7}}{\intty{}}\\
\EqCSubtype{\tau_{7}}{\tau_{6}}\\
\EqCLub{\tau_{3}}{\tau_{4}}{\tau_{5}}\\
\EqCTeq{\tau_{9}}{\intty{}}\\
\EqCSubtype{\tau_{9}}{\tau_{8}}
\end{mconstraints}%
\begin{mconstraints}{Solution}
\RCSubst{\delta_{1}}{\dic{n}{3}} &
\RCSubst{\delta_{2}}{\dic{n}{3}}\\
\RCSubst{\delta_{3}}{\dic{fac}{2}} &
\RCSubst{\delta_{4}}{\dic{n}{3}}\\
\RCSubst{\delta_{5}}{\dic{fac}{2}} \\
\TCSubst{\tau_{1}}{\intty{}} &
\TCSubst{\tau_{3}}{\intty{}} \\
\TCSubst{\tau_{4}}{\intty{}} &
\TCSubst{\tau_{5}}{\intty{}} \\
\TCSubst{\tau_{6}}{\intty{}} &
\TCSubst{\tau_{7}}{\intty{}} \\
\TCSubst{\tau_{8}}{\intty{}} &
\TCSubst{\tau_{9}}{\intty{}} \\
\TCSubstL{\tau_{2}}{\arrty{\intty{}}{\intty{}}}
\end{mconstraints}%
}

\begin{boxedminipage}[t]{\hsize}
  \lstinputlisting[language=LMR,basicstyle=\lstfigurestyle, frame=none]{figures/examples/02-scope.lmr}
\end{boxedminipage}
\begin{boxedminipage}[t]{.545\hsize}
\usebox{\boxone}
\end{boxedminipage}
\hfill
\begin{boxedminipage}[t]{.445\hsize}
  \usebox{\boxtwo}%
  \vspace{\vdiff}
\end{boxedminipage}

\caption{Lexical scoping modeled in a scope graph and subtyping relations captured in constraints.}
